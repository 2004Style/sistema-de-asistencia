# ============================================
# .env - √öNICA FUENTE DE VERDAD
# ============================================
# Este es el √öNICO archivo .env que necesitas
# Copia a .env y personaliza todos los valores
#
# NUNCA subas este archivo a git (contiene secrets sensibles)
# ============================================

# ============================================
# 1. BASE DE DATOS (CR√çTICO)
# ============================================
# URL de conexi√≥n a PostgreSQL
# Formato: postgresql://usuario:contrase√±a@host:puerto/nombre_db?parametros

# Ejemplo LOCAL (desarrollo):
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/asistencia_dev

# Ejemplo NEON (cloud):
# DATABASE_URL=postgresql://user:password@ep-xxxx-xxxxx.us-east-1.aws.neon.tech/dbname?sslmode=require

DATABASE_URL=postgresql://rdev:rdev@localhost:5432/asistencia


# ============================================
# 2. SEGURIDAD - CLAVES CRIPTOGR√ÅFICAS (CR√çTICO)
# ============================================
# Generar con: openssl rand -hex 32

# Clave secreta para FastAPI (para signing tokens, etc.)
SECRET_KEY=your-secret-key-change-in-production-REPLACE-ME

# Clave secreta para JWT (tokens de autenticaci√≥n)
JWT_SECRET_KEY=your-jwt-secret-key-change-in-production-REPLACE-ME

# Clave secreta para NextAuth (autenticaci√≥n del cliente)
NEXTAUTH_SECRET=your-nextauth-secret-change-in-production-REPLACE-ME


# ============================================
# 3. URLS P√öBLICAS - Cliente Next.js (IMPORTANTE)
# ============================================
# Estas URLs son P√öBLICAS (accesibles desde navegador)
# Se embeben en el HTML/JavaScript compilado del cliente
# NO son URLs internas de Docker

# URL p√∫blica del Backend (API) - para que navegador acceda
# LOCAL (con Docker): http://localhost/api (Nginx proxy)
# PRODUCCI√ìN: https://tu-dominio.com/api
NEXT_PUBLIC_URL_BACKEND=http://localhost/api

# URL p√∫blica del Cliente (para NextAuth) - dominio p√∫blico
# LOCAL (con Docker): http://localhost (Nginx lo sirve)
# PRODUCCI√ìN: https://tu-dominio.com (SIN trailing slash)
NEXT_PUBLIC_NEXTAUTH_URL=http://localhost


# ============================================
# 4. CONFIGURACI√ìN DE API (FastAPI)
# ============================================
HOST=0.0.0.0
PORT=8000
TIMEZONE=America/Lima

# ============================================
# 4.1. CORS - Or√≠genes Permitidos (CR√çTICO)
# ============================================
# üö® IMPORTANTE: NO usar ["*"] con allow_credentials=True
# Especificar expl√≠citamente los or√≠genes permitidos
# Separados por comas (SIN espacios despu√©s de comas)
#
# Desarrollo LOCAL con Docker:
#   - http://localhost:3000 (cliente directo en puerto 3000)
#   - http://localhost:80    (Nginx proxy en puerto 80)
#   - http://nginx           (nombre del contenedor)
#
# Producci√≥n:
#   - https://tu-dominio.com
#   - https://www.tu-dominio.com
#   - https://api.tu-dominio.com (si tienes)
#
# FLUJO DE COMUNICACI√ìN:
#   Navegador ‚Üí NEXT_PUBLIC_URL_BACKEND (http://localhost/api)
#       ‚Üí Nginx resuelve ‚Üí API (api:8000)
#   
#   API responde ‚Üí Navegador con Access-Control-Allow-Origin
#       ‚Üí Si el origen est√° en CORS_ORIGINS, ‚úÖ OK
#       ‚Üí Si NO, ‚ùå CORS error

# Para desarrollo LOCAL con Docker (cliente:3000, api:8000, nginx:80):
CORS_ORIGINS=http://localhost:3000,http://localhost:80,http://nginx

# Para producci√≥n, cambiar a:
# CORS_ORIGINS=https://tu-dominio.com,https://www.tu-dominio.com

# Ambiente
AUTO_MIGRATE=false
DEBUG=false
ENVIRONMENT=production


# ============================================
# 5. NGINX - REVERSE PROXY
# ============================================
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443


# ============================================
# 6. EMAIL (Notificaciones)
# ============================================
MAIL_API_URL=http://localhost:3001
MAIL_API_CLIENT_ID=your-mail-api-client-id
MAIL_API_SECRET=your-mail-api-secret
SMTP_FROM_EMAIL=noreply@yourdomain.com
SMTP_FROM_NAME=Sistema de Asistencia


# ============================================
# 7. ENTORNO Y NODE
# ============================================
NODE_ENV=production
NEXT_TELEMETRY_DISABLED=1


# ============================================
# 8. ALERTAS Y UMBRALES
# ============================================
TARDANZAS_MAX_ALERTA=3
FALTAS_MAX_ALERTA=2
MINUTOS_TARDANZA=15


# ============================================
# 9. ARCHIVOS Y L√çMITES
# ============================================
MAX_FILE_SIZE=10485760
UPLOAD_DIR=recognize/data
REPORTS_DIR=public/reports
TEMP_DIR=public/temp
PASSWORD_MIN_LENGTH=8

